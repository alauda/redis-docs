---
weight: 40
sourceSHA: 1f86955ba740a5a0ea96744a223dd924ee9d953e8c1c0c52f723a45d6b633521
---

# 架构

灵雀云的 Redis OSS 缓存服务提供了两种 Redis 管理架构，以满足不同场景下的高可用性需求，这些需求基于客户的痛点问题。

- 哨兵模式：该模式包括一个 Redis 主节点和可配置数量的一个或多个从节点。 从节点用于读取操作，并与主节点保持同步以确保高可用性。 哨兵模式提供了读取的可扩展性，并可以与 Redis Sentinel 一起使用，以实现自动故障切换和高可用性。
- 集群模式：该模式是一种分布式架构，允许将数据分片到多个 Redis 节点。 集群模式提供了读写可扩展性、自动故障切换和数据分区功能，从而实现更高的性能和可用性。

## 哨兵模式

哨兵模式是一种基于主从复制的高可用解决方案，由 Redis 提供。通过监控 Redis 实例的状态，哨兵模式能在主节点故障时自动将从节点提升为主节点，以确保服务的可用性。哨兵模式的主要特点如下：

- 简单易用：与集群模式相比，实现和管理相对简单。
- 高可用性：支持自动故障切换，提供高可用性的数据服务。
- 有限扩展性：仅支持主从复制，无法像集群模式那样进行横向扩展。
- 单点故障：哨兵节点本身也可能发生故障，因此需要考虑哨兵节点的高可用性和容错能力。

![sentinel arch](./assets/sentinel_arch.png)

## 集群模式

集群模式是 Redis 分布式解决方案的核心。通过 Redis Cluster，我们可以通过将数据分布在多个节点上来实现 Redis 的横向扩展，利用分片技术和一致性哈希算法来自动分区和负载平衡数据。集群模式的主要特点如下：

- 高可用性：支持节点故障的自动恢复，确保数据服务的高可用性。
- 横向扩展：支持节点的动态扩展和收缩，根据业务需求灵活调整节点数量。
- 负载均衡：平衡节点负载，避免单个节点过载的情况。
- 数据分散：将数据分布到多个节点上，防止单个节点数据过大带来的问题。
- 高复杂性：需要考虑分片、一致性哈希、数据迁移和节点平衡等问题，实现和管理相对复杂。

![cluster arch](./assets/cluster_arch.png)

## 架构选择

|               | 需要无限的横向扩展能力 | 单节点或小规模节点部署 | 大数据存储规模（超过8GB） | 高可用性 |
| :------------ | :--------------------- | :--------------------- | :--------------------- | :------- |
| 哨兵模式     |                       | ✓                     |                       | ✓      |
| 集群模式     | ✓                     |                       | ✓                     | ✓      |
