---
weight: 10
sourceSHA: 99f9bfbd545f7baf85a3f688ec5619acf3a6d39b3cfe3c41a8503d219221d327
---

# 实例规格变更

资源分配的调整对于在数据量增长时维持 Redis 的最佳性能至关重要。提前扩展 Redis 实例以避免接近存储或性能阈值，确保服务持续可用并防止性能下降。

## 操作限制

1. **调度配置兼容性**：在扩展副本数量时，请确保请求的数量符合当前实例的任何节点调度约束（标签、污点、容忍）。

2. **哨兵模式存储一致性**：在哨兵部署中，所有节点（主节点和副本）必须保持相同的存储容量分配，以确保正确的复制和故障转移能力。

3. **集群模式扩展灵活性**：在集群部署中，单个分片可以独立扩展，但每个分片内，所有副本节点必须与其主节点保持存储容量的对等。

4. **资源分配考虑**：在修改 CPU 和内存分配时：

   - 分析历史使用模式和预计增长
   - 在扩展前确认集群资源的可用性
   - 考虑 Redis 内存的开销需求（数据集大小 ~30%）
   - 对生产环境实施逐步扩展

   不足的资源分配可能导致实例不稳定，而过多的资源分配则会导致资源利用效率低下。

## 实施步骤

<Tabs>
  <Tab label="CLI">
    实例规格通过 Redis 自定义资源中的 `spec.resources` 字段进行控制（有关详细参数，请参见 [API 文档](../../apis/kubernetes_apis/redis/redis)）。

    ```bash
    # 将实例资源更新为 300m CPU 和 300Mi 内存
    $ kubectl -n default patch redis s6 --type=merge --patch='{"spec": {"resources":{"limits":{"cpu": "300m","memory":"300Mi"},"requests":{"cpu":"300m", "memory":"300Mi"}}}}'
    ```

    要监控扩展操作的进度：

    ```bash
    $ kubectl -n default get redis s6 -w
    ```
  </Tab>

  <Tab label="Web Console">
    1. 在左侧导航栏中导航至 **Redis**。

    2. 选择包含您实例的 ***命名空间名称***。

    3. 点击 ***实例名称*** 以访问其详细信息。

    4. 在 **详细信息** 页签下，找到拓扑图并在工具栏中点击 **更新规格**。

    5. 配置扩展参数：
       - 如有需要，调整副本数量（受架构限制）
       - 指定新的 CPU 和内存分配
       - 如有必要，修改存储容量

    6. 点击 **更新** 以启动扩展操作。
  </Tab>
</Tabs>

系统将逐步应用配置更改，以最小化服务中断。一旦扩展操作成功完成，拓扑视图将反映更新后的规格。

> **性能提示**：对于具有大数据集的实例，考虑在流量较低的时期执行扩展操作，以尽量减少对客户端操作的潜在影响。
