---
weight: 50
sourceSHA: 42f080585dd718dfa380fc06241651635b2ae9ec7faa7d5c58eb4e1d9f33b935
---

# 更新规格

资源分配调整对于维持最佳的 Redis 性能至关重要，尤其是在数据量不断增长的情况下。在达到存储或性能阈值之前，主动扩展 Redis 实例，可以确保服务持续可用，防止性能下降。

## 操作约束

1. **调度配置兼容性**：在扩展副本数量时，请确保所请求的数量符合已为该实例配置的任何现有节点调度约束（标签、污点、容忍）。

2. **哨兵模式存储一致性**：在哨兵部署中，所有节点（主节点和副本）必须保持相同的存储容量分配，以确保适当的复制和故障切换能力。

3. **集群模式扩展灵活性**：在集群部署中，各个分片可以独立扩展，但在每个分片内，所有副本节点的存储容量必须与主节点保持一致。

4. **资源分配注意事项**：在修改 CPU 和内存分配时：

   - 分析历史使用模式和预期增长
   - 在扩展之前验证集群资源的可用性
   - 考虑 Redis 内存开销要求（约 30% 的数据集大小）
   - 在生产环境中实施渐进式扩展

   不当的资源分配可能导致实例不稳定，而过度的资源分配则会导致资源利用效率低下。

## 步骤

<Tabs>
  <Tab label="CLI">
    实例规格通过 Redis 自定义资源中的 `spec.resources` 字段进行控制（有关详细参数，请参见 [API 文档](../../apis/kubernetes_apis/redis/redis)）。
    
    ```bash
    # 将实例资源更新为 300m CPU 和 300Mi 内存
    $ kubectl -n default patch redis s6 --type=merge --patch='{"spec": {"resources":{"limits":{"cpu": "300m","memory":"300Mi"},"requests":{"cpu":"300m", "memory":"300Mi"}}}}'
    ```
    
    要监控扩展操作的进度：
    
    ```bash
    $ kubectl -n default get redis s6 -w
    ```
  </Tab>
  
  <Tab label="Web 控制台">
    1. 在左侧导航栏中导航到 **Redis**。
    
    2. 选择包含您实例的 ***命名空间名称***。
    
    3. 点击 ***实例名称*** 以访问其详细信息。
    
    4. 在 **详细信息** 选项卡中，找到拓扑图并点击工具栏中的 **更新规格**。
    
    5. 配置扩展参数：
       - 如有需要，调整副本数量（受架构约束影响）
       - 指定新的 CPU 和内存分配
       - 如有需要，修改存储容量
    
    6. 点击 **更新** 以启动扩展操作。
  </Tab>
</Tabs>

系统将逐步应用配置更改，以最小化服务中断。一旦扩展操作成功完成，拓扑视图将反映更新后的规格。

> **性能提示**：对于具有大数据集的实例，请考虑在流量较低的时期进行扩展操作，以最小化对客户端操作的潜在影响。
