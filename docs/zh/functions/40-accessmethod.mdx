---
weight: 40
---

# 访问方式

业务应用访问 Redis 实例时有多种连接方式，本节描述了如何选择连接地址，并通过连接地址访问到哨兵模式或集群模式 Redis 实例。

## 如何获取访问地址

Redis 实例支持多种访问地址来满足不同场景的需求。这里介绍的访问方式都是指 Redis 标准的的访问方式。具体可查看社区文档:

* [Redis 集群模式规范](https://redis.io/docs/latest/operate/oss_and_stack/reference/cluster-spec/)
* [Redis 哨兵模式客户端规范](https://redis.io/docs/latest/develop/reference/sentinel-clients/)

### 集群内访问地址

集群内访问只可用于 Kubernetes 网络内部访问。连接的地址有两个选择：

1. 内部路由 (即通过 DNS 方式)
2. 内部路由的 IP

这两种方式都能实现访问 Redis 集群模式或者哨兵模式。

地址获取路径：**实例详情** > **访问方式** > **集群内访问**

### 集群外访问地址

集群外访问可用于 Kubernetes 网络外部访问，比如从另一个 Kubernetes 集群访问(也可用于 Kubernetes 集群内部访问，这个还需要确认防火墙规则，是否允许)。

目前支持 NodePort 和 LoadBalancer 两种集群外访问方式。

地址获取路径：**实例详情** > **访问方式** > **集群外访问**

<Directive type="warning" title="NodePort 访问说明">
在 Kubernetes 集群外访问 NodePort，需要确保防火墙已放行相应的IP 和 NodePort。由于 Redis 哨兵和集群的架构限制，业务与 NodePort 之间需要确保网络联通，不支持将实例的 NodePort 地址通过 Load Balancer (LB) 做代理转发。

在多网卡情况下，Redis 哨兵和集群会选择节点的默认网卡 IP 来初始化各个 Redis 节点访问地址，因而不支持通过节点的非默认 IP + 暴露的端口访问。这种情况下建议使用 LoadBalancer 访问方式来创建实例。
</Directive>


## 连接访问

举例展示了 Jedis、 Lettuce, Redission, go-redis 客户端如何访问 Redis 实例。更多客户端连接示例请参考社区。

### 哨兵模式

每个哨兵实例，对应的集群名称都是 `mymaster`。

Redis 实例的连接示例请参考 [访问实例（哨兵模式）](../how_to/access/10-sentinel.mdx)

### 集群模式

客户端连接集群的任意节点之后，会去查询集群的槽分布。在数据访问时，客户端需要直连每个 Pod 来访问。为了连接的可靠性，建议在客户端填写所有 Pod 的访问地址。

Redis 实例的连接示例请参考 [访问实例（集群模式）](../how_to/access/20-cluster.mdx)
