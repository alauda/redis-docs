---
weight: 75
sourceSHA: af598f1b244acbd7a3270f0e9deecbf1a67232e2ae236117a92e23fceb724ed2
---

# Мониторинг и оповещения

Платформа предоставляет обширные возможности мониторинга с интегрированными информационными панелями для экземпляров Redis. Эти функции мониторинга позволяют проводить анализ производительности, отслеживание использования ресурсов и настраиваемые механизмы оповещения для проактивного управления.

## Мониторинг

Платформа автоматически собирает ключевые показатели производительности для экземпляров Redis, связанные с использованием ресурсов и операционной эффективностью. Эти показатели могут быть просмотрены в режиме реального времени через вкладку **Мониторинг** экземпляра.

| Категория                      | Показатели                                                                  |
| ------------------------------ | -------------------------------------------------------------------------- |
| **Мониторинг статуса кластера** | Статистика по количеству ключей, показатели выполнения команд, запаздывание репликации и т.д.  |
| **Мониторинг ресурсов**        | Использование памяти, графики сетевого трафика, потребление хранилища и т.д. |
| **Мониторинг производительности** | Количество подключений, пропускная способность сетевого ввода-вывода, задержка команд и т.д.         |

## Оповещения

Чтобы настроить правила оповещений для экземпляров Redis, перейдите на страницу **Оповещения** > **Правила** в сервисе Alauda Application Service.

### Настройка правил оповещения

Для реализации оповещений необходимо создать правило оповещения в сервисе Alauda Application Service. Правило оповещения определяет цели мониторинга, предельные условия, которые вызывают уведомления, и механизмы доставки уведомлений.

Платформа предоставляет следующие предустановленные индикаторы оповещения:

| Индикатор                     | Рекомендуемый порог             | Описание                                                                                                                                               |
| :---------------------------- | :------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------- |
| Статус экземпляра             | !=1, постоянно в течение 30 секунд | Отслеживает доступность экземпляра и состояние работы                                                                                                  |
| Частота доступа к ключам      | \< 80%, постоянно в течение 30 секунд | Отслеживает эффективность кэша; низкие уровни попадания могут указывать на пропуски в кэше, требующие корректировки стратегии (увеличение значений TTL, оптимизация шаблонов ключей и т.д.) |
| Среднее время ответа          | >0.1с, постоянно в течение 30 секунд  | Отслеживает задержку выполнения команд; длительные времена ответа могут указывать на ограничения CPU, чрезмерную нагрузку или операции с BigKey       |
| Переключение мастер-слейв     | =1, постоянно в течение 30 секунд  | Обнаруживает переходы ролей мастер-слейв, которые могут указывать на проблемы с инфраструктурой или сбои узлов Redis                                   |
| Входная пропускная способность на узел | Пороговые значения, специфичные для окружения | Отслеживает поступление сетевого трафика в режиме реального времени, чтобы предотвратить насыщение пропускной способности, влияющее на доступность сервиса |
| Исходящая пропускная способность на узел | Пороговые значения, специфичные для окружения | Отслеживает исходящий сетевой трафик в режиме реального времени, чтобы предотвратить насыщение пропускной способности, влияющее на доступность сервиса |
| Подключения клиентов на узел  | Пороговые значения, специфичные для окружения | Отслеживает шаблоны подключения для обнаружения потенциальных утечек подключения или ненормальных шаблонов доступа                                       |
| Использование CPU на узел     | > 80%, постоянно в течение 30 секунд  | Отслеживает потребление CPU; постоянное высокое использование может требовать планирования ресурсов и масштабирования                                    |
| Использование памяти на узел  | > 80%, постоянно в течение 30 секунд  | Отслеживает использование памяти; приближение к предельным значениям требует немедленного масштабирования, чтобы избежать высвобождения или условий OOM  |
| Использование хранилища на узел | > 80%, постоянно в течение 30 секунд  | Отслеживает использование постоянного хранилища для конфигураций RDB/AOF; высокое использование требует расширения емкости                          |

Эти предустановленные индикаторы облегчают быструю реализацию правил оповещения. Для сложных требований мониторинга пользовательские индикаторы оповещения могут быть определены с использованием синтаксиса запросов Prometheus:

```yaml
(1/(1+(avg(irate(redis_keyspace_misses_total{namespace=~"<namespace>", pod=~"<podname prefix>-.*"}[5m])) by(namespace,service) / (avg(irate(redis_keyspace_hits_total{namespace=~"<namespace>", pod=~"<podname prefix>-.*"}[5m])) by(namespace,service)+1))))
```

В этом примере `redis_keyspace_misses_total` представляет собой метрику, собранную Prometheus, `<namespace>` фильтрует ресурсы по пространству имен, а `<podname prefix>` задает шаблон имени Pod для ресурсов, управляемых `Deployment` или `StatefulSet`. Для получения подробной информации о запросах метрик см. [Официальная документация PromQL](https://prometheus.io/docs/prometheus/latest/querying/basics/).

Для получения подробных рекомендаций по настройке и управлению оповещениями см. <ExternalSiteLink name="acp" href="appservice/unified-om/alert-policy-mgt/index" children="Управление оповещениями" />.
