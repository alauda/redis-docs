---
weight: 50
sourceSHA: 6407d905a7fc120647950ef01fa97e9cf86151c6213e6587c090145b59faa597
---

# Спецификация обновления

Корректировка распределения ресурсов имеет решающее значение для поддержания оптимальной производительности Redis по мере роста объемов ваших данных. Проактивное масштабирование ваших экземпляров Redis до достижения пороговых значений хранилища или производительности гарантирует непрерывную доступность сервиса и предотвращает ухудшение производительности.

## Операционные ограничения

1. **Совместимость конфигурации расписания**: При увеличении числа реплик убедитесь, что запрашиваемое количество соответствует любым существующим ограничениям расписания узлов (ярлыки, загрязнения, толерантности), настроенным для экземпляра.

2. **Согласованность хранилища в режиме Sentinel**: В развертываниях Sentinel все узлы (основные и реплики) должны поддерживать идентичные объемы хранилища для обеспечения правильной репликации и возможностей переключения на резервный узел.

3. **Гибкость масштабирования в режиме кластера**: В развертываниях Cluster отдельные шардные узлы могут масштабироваться независимо, но внутри каждого шарда все узлы-реплики должны поддерживать паритет объема хранилища с основным узлом.

4. **Учёт распределения ресурсов**: При изменении объемов CPU и памяти:

   - Анализируйте исторические паттерны использования и прогнозируемый рост
   - Проверяйте доступность ресурсов кластера перед масштабированием
   - Учитывайте требуемые накладные расходы памяти Redis (~30% выше размера набора данных)
   - Реализуйте постепенное масштабирование для производственных сред

   Неправильное распределение ресурсов может вызвать нестабильность экземпляров, в то время как чрезмерное распределение приведет к неэффективному использованию ресурсов.

## Процедура

<Tabs>
  <Tab label="CLI">
    Спецификации экземпляра управляются через поле `spec.resources` в пользовательском ресурсе Redis (см. [документацию API](../../apis/kubernetes_apis/redis/redis) для получения подробной информации о параметрах).

    ```bash
    # Обновить ресурсы экземпляра до 300m CPU и 300Mi памяти
    $ kubectl -n default patch redis s6 --type=merge --patch='{"spec": {"resources":{"limits":{"cpu": "300m","memory":"300Mi"},"requests":{"cpu":"300m", "memory":"300Mi"}}}}'
    ```

    Для мониторинга хода операции масштабирования:

    ```bash
    $ kubectl -n default get redis s6 -w
    ```
  </Tab>

  <Tab label="Веб-консоль">
    1. Перейдите в **Redis** в левом навигационном меню.

    2. Выберите ***имя пространства имен***, содержащее ваш экземпляр.

    3. Нажмите на ***имя экземпляра*** для доступа к его деталям.

    4. На вкладке **Детали** найдите схему топологии и нажмите **Обновить спецификации** на панели инструментов.

    5. Настройте параметры масштабирования:
       - При необходимости измените количество реплик (с учетом архитектурных ограничений)
       - Укажите новые объемы CPU и памяти
       - Измените объем хранилища, если это необходимо

    6. Нажмите **Обновить**, чтобы инициировать операцию масштабирования.
  </Tab>
</Tabs>

Система будет постепенно применять изменения конфигурации, чтобы минимизировать прерывание сервиса. Просмотр топологии отразит обновленные спецификации после успешного завершения операции масштабирования.

> **Совет по производительности**: Для экземпляров с большими объемами данных рассмотрите возможность выполнения операций масштабирования в периоды с меньшей загрузкой трафика, чтобы минимизировать потенциальное влияние на операции клиентов.
