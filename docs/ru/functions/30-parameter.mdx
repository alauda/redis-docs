---
weight: 30
sourceSHA: 0acdf6864db33adafab5a21f26d0a71a117b9a8c5b79227726312e5904721b18
---

# Настройка параметров

При создании экземпляра Redis применяется шаблон параметров по умолчанию системы.

Alauda Application Services предоставляет специализированные шаблоны параметров для каждой версии Redis (три шаблона для версии 6.0+ и два для версии 5.0) для учета различных операционных требований.

| Шаблон параметров           | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Учетные данные                                                                                                                                                                               |
| :-------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Шаблон параметров RDB      | **Шаблон параметров RDB Persistence** настраивает Redis с использованием устойчивости RDB, которая сериализует данные в памяти на диск в виде бинарных снимков с заданными интервалами. Этот подход идеален для окружений с ограниченными ресурсами, которые требуют баланса между производительностью и долговечностью данных, где потеря данных на уровне минуты допустима. Redis может выполнять функции постоянного хранилища данных в этом режиме.                                                        | Долговечность данных зависит от конфигурации параметра `save`, который обычно предоставляет цели восстановления на уровне минуты (RPO).                                                         |
| Шаблон параметров AOF      | **Шаблон параметров AOF Persistence** настраивает Redis с использованием устойчивости Append-Only File, которая регистрирует все операции записи последовательно для обеспечения целостности данных. Во время восстановления экземпляра Redis воспроизводит операции из файла AOF для восстановления набора данных. Этот подход подходит для окружений с достаточными ресурсами, где безопасность данных имеет приоритет над соображениями производительности. Redis может выполнять функции постоянного хранилища данных в этом режиме. | Частые операции fsync, требуемые для устойчивости AOF, требуют высокопроизводительной инфраструктуры хранения и могут повлиять на общую производительность Redis, но обеспечивают RPO на уровне секунды. |
| Шаблон параметров бездискового хранения | **Шаблон параметров бездискового хранения** полностью отключает механизмы устойчивости Redis. В этой конфигурации Redis функционирует исключительно как кэш в памяти для ускорения производительности приложения. Все данные хранятся в памяти без записи на диск, что приводит к потере данных после перезапуска или сбоя Redis. Эта конфигурация максимизирует производительность, но жертвует долговечностью данных.                                                                                          | Данные существуют только в памяти, что устраняет накладные расходы на производительность, связанные с хранилищем. Тем не менее, сбой всех узлов Redis приводит к полной потере данных.                       |

При создании экземпляра Redis выберите шаблон, который наилучшим образом соответствует вашим бизнес-требованиям в поле **Шаблоны параметров** на странице **Создание экземпляра Redis**.

Вы также можете создавать пользовательские шаблоны параметров для повторного использования на нескольких экземплярах.

Параметры Redis делятся на три категории в зависимости от того, как изменения вступают в силу:

| Категория                  | Параметры                                                                                       | Поведение                                                                                                                                           |
| :------------------------ | :----------------------------------------------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------- |
| Параметры горячих обновлений     | Различные параметры, которые поддерживают динамическую перенастройку                                          | Изменения вступают в силу немедленно без необходимости перезапуска экземпляра.                                                                        |
| Параметры обновления после перезапуска | `databases`, `rename-command`, `rdbchecksum`, `tcp-backlog`, `io-threads`, `io-threads-do-reads` | Изменения требуют полной перезагрузки экземпляра для вступления в силу.                                                                                      |
| Невозможно изменить параметры | `bind`, `protected-mode`, `port`, `supervised`, `pidfile`, `dir` и т. д.                           | Эти параметры являются встроенными системными конфигурациями или их изменение после инициализации экземпляра может вызвать операционную нестабильность. |

При изменении параметров Redis учитывайте следующие рекомендации:

- Перед внесением изменений в параметры определите, поддерживают ли они горячие обновления. Для параметров, требующих перезапуска экземпляра, выполните соответствующие резервные копии данных перед изменением.
- После обновления версии Redis проверьте совместимость параметров в [документации по конфигурации Redis](https://redis.io/topics/config), чтобы выявить устаревшие, удаленные или измененные параметры.

## Процедура

<Tabs>
  <Tab label="CLI">
    <br />

    ##### Параметры узла данных

    Конфигурация параметров узла данных для экземпляра указывается через поле `spec.customConfig` ресурса CR Redis. Смотрите [документацию API](../apis/kubernetes_apis/redis/redis) для получения подробных описаний параметров.

    ```bash
    # Обновите конфигурацию узла данных экземпляра s6
    $ kubectl -n default patch redis s6 --type=merge --patch='{"spec": {"customConfig": {"save":"600 1"}}}'
    ```

    ##### Параметры узла Sentinel

    Конфигурация параметров для узлов данных, регистрирующихся на узлы sentinel, следующая:

    > В настоящее время поддерживаются только следующие три параметра: `down-after-milliseconds`, `failover-timeout`, `parallel-syncs`.

    ```bash
    # Обновите конфигурацию узла sentinel экземпляра s6
    $ kubectl -n default patch redis s6 --type=merge --patch='{"spec": {"sentinel": {"monitorConfig": {"down-after-milliseconds":"30000","failover-timeout":"180000","parallel-syncs":"1"}}}}'
    ```
  </Tab>

  <Tab label="Веб-консоль">
    1. Нажмите **Redis** в левой навигационной панели.

    2. Нажмите на ***название пространства имен***.

    3. Нажмите на ***название экземпляра***.

    4. Вкладке **Настройка параметров** нажмите **Обновить параметры экземпляра** или **Обновить параметры Sentinel**.

    5. Установите параметры.

    6. Нажмите **Обновить**.
  </Tab>
</Tabs>
