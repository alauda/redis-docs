---
weight: 30
---

# Patch Version Upgrade

Redis patch version upgrades provide security fixes and stability improvements. The upgrade process utilizes a rolling update strategy, sequentially restarting pods to maintain service availability throughout the operation. Strategic scheduling of upgrades during maintenance windows is recommended to minimize potential impact on production workloads.

When patch versions become available, we recommend adopting them promptly to ensure your Redis instances benefit from the latest security patches and feature enhancements.

## Configure Upgrade Strategy

You can define how patch upgrades are applied to your Redis instances by configuring the upgrade policy.

### Procedure

<Tabs>
  <Tab label="CLI">
    ```bash
    # Set the upgrade policy for a specific instance
    $ kubectl -n <namespace> patch redis <instance-name> --type='json' -p='[{"op":"replace","path":"/spec/upgradeOption/autoUpgrade","value":"<true|false>"}]'
    ```
  </Tab>
  <Tab label="Web Console">
    1. Navigate to the instance details page.
    2. Select **Patch Version Upgrade Policy** from the action menu.
    3. Choose the appropriate upgrade strategy:
       - **Manual**: Upgrades require explicit administrator approval.
       - **Automatic**: Upgrades are automatically applied during maintenance windows.
    4. Click **Update** to apply the configuration.
  </Tab>
</Tabs>

## Perform Individual Instance Upgrade

Individual instance upgrades provide granular control over the upgrade process, allowing for targeted validation before deploying changes across your environment.

### Prerequisites

- An available patch version upgrade is indicated by an upgrade icon in the instance list
- The instance status must be `Running` before initiating the upgrade

### Procedure

<Tabs>
  <Tab label="CLI">
    ```bash
    # Check for the latest patch version available
    $ kubectl get imageversion -l middleware.instance/type=redis,middleware.instance/latest -o jsonpath='{.items[*].spec.crVersion}'

    # Check current patch version of a specific instance
    $ kubectl -n <namespace> get redis <instance-name> -o jsonpath='{.status.upgradeStatus.crVersion}'

    # If the current version is older than the latest version, proceed with the upgrade
    $ kubectl -n <namespace> patch redis <instance-name> --type='json' -p='[{"op":"replace","path":"/spec/upgradeOption/crVersion","value": "<new-patch-version>"}]'
    ```
  </Tab>
  <Tab label="Web Console">
    1. Access the instance details page.

    2. Click **Upgrade Now** adjacent to the version upgrade notification.

    3. Review the comprehensive changelog detailing component and plugin version modifications.

    4. Click **Upgrade Now** to initiate the process.

    5. Monitor the instance status until it returns to `Running`, confirming successful upgrade completion.
  </Tab>
</Tabs>

## Execute Bulk Upgrade Operation

The bulk upgrade feature enables efficient management of upgrades across multiple Redis instances, streamlining the maintenance process for large deployments.

### Prerequisites

- Platform administrator privileges
- Target instances must be in a `Running` state.

### Procedure

<Tabs>
  <Tab label="CLI">
    ```bash
    # Check for the latest patch version available
    $ kubectl get imageversion -l middleware.instance/type=redis,middleware.instance/latest -o jsonpath='{.items[*].spec.crVersion}'

    # Proceed bulk upgrade for multiple instances
    $ kubectl -n <namespace> patch redis --all --type='json' -p='[{"op":"replace","path":"/spec/upgradeOption/crVersion","value": "<new-patch-version>"}]'
    ```
  </Tab>
  <Tab label="Web Console">
    1. Navigate to **Upgrade Management** in the left navigation panel.

    2. Select the appropriate **operator** to access its management interface.

    3. Select the target instances for upgrade and click **Bulk Upgrade**.

    4. Review the detailed version change information for all affected components.

    5. Click **Upgrade Now** to begin the coordinated upgrade process.

    6. Monitor the upgrade progress until all instances return to `Running` state.
  </Tab>
</Tabs>
